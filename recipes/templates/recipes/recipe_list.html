{% extends "recipes/base.html" %}

{% block title %}All Recipes - Recipe Book{% endblock %}

{% block content %}
<div style="margin-bottom: 2rem;">
    <h2 style="font-size: 2rem; margin-bottom: 1rem;">All Recipes</h2>
</div>

{% if recipes %}
<div class="recipe-grid">
    {% for recipe in recipes %}
    <div class="recipe-card">
        <h3>
            <a href="{% url 'recipe-detail' recipe.pk %}">
                {{ recipe.name }}
            </a>
        </h3>

        {% if recipe.description %}
        <p style="color: #7f8c8d; margin-bottom: 1rem;">{{ recipe.description|truncatewords:20 }}</p>
        {% endif %}

        <div class="recipe-meta">
            {% if recipe.prep_time %}
            <span>Prep: {{ recipe.prep_time }} min</span>
            {% endif %}
            {% if recipe.cook_time %}
            <span>Cook: {{ recipe.cook_time }} min</span>
            {% endif %}
            {% if recipe.servings %}
            <span>Serves: {{ recipe.servings }}</span>
            {% endif %}
        </div>

        <div class="recipe-actions">
            <a href="{% url 'recipe-detail' recipe.pk %}" class="btn" style="font-size: 0.9rem; padding: 0.4rem 0.8rem;">View</a>
            <a href="{% url 'recipe-update' recipe.pk %}" class="btn btn-secondary" style="font-size: 0.9rem; padding: 0.4rem 0.8rem;">Edit</a>
        </div>
    </div>
    {% endfor %}
</div>

{% if is_paginated %}
<div class="pagination">
    <div class="pagination-controls">
        {% if page_obj.has_previous %}
        <a href="?page=1" class="btn btn-secondary">First</a>
        <a href="?page={{ page_obj.previous_page_number }}" class="btn btn-secondary">Previous</a>
        {% endif %}

        <span class="page-info">
            Page {{ page_obj.number }} of {{ page_obj.paginator.num_pages }}
        </span>

        {% if page_obj.has_next %}
        <a href="?page={{ page_obj.next_page_number }}" class="btn btn-secondary">Next</a>
        <a href="?page={{ page_obj.paginator.num_pages }}" class="btn btn-secondary">Last</a>
        {% endif %}
    </div>
</div>
{% endif %}

{% else %}
<div class="empty-state">
    <p>No recipes found.</p>
    <a href="{% url 'recipe-create' %}" class="btn">Create Your First Recipe</a>
</div>
{% endif %}
{% endblock %}
